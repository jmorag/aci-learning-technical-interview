# ACI learning technical interview Joseph Morag
This is a Haskell implementation of the prompt given at (https://gist.github.com/tfausak/2dd8a443fd4386a46cc67054e4c38e9c). It builds with both stack and cabal and has been tested with ghc 8.10.7. Running `(cabal|stack) run server` will start a server at (http://localhost:3000) or at whatever port the `PORT` environment variable is set to. There are no other system dependencies besides a working Haskell environment.

## Implementation notes
Before receiving this prompt, I had been working on embedding a version of the [Tutorial D](https://www.dcs.warwick.ac.uk/~hugh/TTM/) database language into the Haskell type system, and this seemed like a perfect vehicle to see if what I made could actually power a toy web server. The project, [databass](https://github.com/laurenarnett/databass/tree/455c89c2ca1178a7231f37ef4108bc7721bb3385/), uses [type-level-sets](https://hackage.haskell.org/package/type-level-sets) to represent database rows as heterogeneous lists of Haskell types tagged with symbols. Currently, databass only supports storing tables in memory using `Map` from [containers](https://hackage.haskell.org/package/containers), but that was sufficient to implement a non-persistent version of the specification. Databass is also missing standard features like safe concurrent access and auto-incrementing primary keys, but those were easy enough to implement at the application level by putting the backing `Map` along with an `Int` inside of an `MVar`. Having actually tried to use this library as a consumer, I would definitely add those features to the library API so that future users, if any, wouldn't have to re-implement them from scratch every time. Overall, the combination of databass and servant makes for an incredibly type-safe API specification, at the cost of some crazy type errors and hideously long compile times. I probably wouldn't use databass in production - certainly not in its current state - but I had a lot of fun polishing it to the point where I could dogfood something with it.
